# Configuration for KFe3J LSWT calculation
python_model_file: "spin_model.py"
# New format: [J1, J2, Dy, Dz, H_dir, H_mag]
# H_dir must be a list representing a unit vector, e.g., [0, 0, 1] for Z-axis
hamiltonian_params: [3.23, 0.11, 0.218, -0.195, [0, 0, 1], 0.0]

parameters:
  S: 2.5      # Spin magnitude (5/2)

calculation:
  cache_mode: "w"  # 'r' to read cache, 'w' to write/regenerate cache
  cache_file_base: "KFe3J_cache" # Base name for cache files in pckFiles/

q_path:
  # Define high-symmetry points (using fractional coordinates for now, adjust if needed)
  # These might need refinement based on the specific Brillouin zone definition used.
  Gamma: [0, 0, 0]
  M: [0.5, 0, 0] # Example M point, adjust based on convention
  K: [0.33333333, 0.33333333, 0] # Example K point, adjust based on convention
  points_per_segment: 100 # Number of q-points between high-symmetry points
  path: ["Gamma", "M", "K", "Gamma"] # Define the path sequence

output:
  disp_data_filename: "../../cache/data/KFe3J_disp_data.npz" # File to save calculated dispersion data
  sqw_data_filename: "../../cache/data/KFe3J_sqw_data.npz" # File to save calculated S(q,w) data

plotting: # Added section
  save_plot: true
  plot_structure: false # Enable plotting of minimized magnetic structure
  disp_plot_filename: "../plots/KFe3J_disp_plot.png" # Filename for saved dispersion plot
  combined_plot_filename: "../plots/KFe3J_combined_plot.png" # Filename for combined plot
  sqw_plot_filename: "../plots/KFe3J_sqw_plot.png"   # Filename for saved S(q,w) map plot
  energy_limits_disp: [0, 20] # Energy limits for dispersion plot
  energy_limits_sqw: [0, 20]  # Energy limits for S(q,w) map
  disp_title: "KFe3J Spin Wave Dispersion"
  sqw_title: "KFe3J S(Q,Ï‰) Intensity Map"
  show_plot: true
  adjust_height_to_screen: true  # Set to true to enable dynamic height
  screen_height_fraction: 0.85   # Optional: Fraction of screen height to use (default 0.85 if not specified)

tasks:
  run_dispersion: true             # Master switch for dispersion calculation and plotting
  calculate_dispersion_new: true   # If true, forces recalculation even if file exists
  run_minimization: true
  plot_dispersion: true            # Switch for plotting dispersion
  run_sqw_map: true                # Master switch for S(q,w) map calculation and plotting
  calculate_sqw_map_new: true      # true: run calculation; false: load from sqw_data_filename for plotting
  plot_sqw_map: true               # Switch for plotting S(q,w) map
