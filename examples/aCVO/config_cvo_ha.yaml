# config_CVO.yaml (Revised)
logging_level: "INFO"

model_params:
  S: 0.5
  J1: 2.49
  J2: 2.7888 # J2 = 1.12 * J1
  J3: 5.0547 # J3 = 2.03 * J1
  G1: 0.28
  Dx: 2.67
  H: 5.0    # Magnetic field

calculation_settings: # Global calculation settings
  cache_mode: "w" # 'w' for first run or if params change, then 'r'
  # cache_file_base_prefix will be augmented with S and H values
  cache_file_base_prefix: "cvo_sw"

dispersion_calc:
  enabled: true
  # Q-points for dispersion path
  q_path_type: "0k0"   # Options: "h00", "0k0", "00l"
  q_min_rlu: 1.0       # Min Q along the scan direction in r.l.u.
  q_max_rlu: 3.0       # Max Q along the scan direction in r.l.u.
  q_num_points: 101    # Number of points along the path
  # Fixed RLU components for the dispersion path (relative to crystal axes)
  # For "0k0" scan, fixed_h_rlu and fixed_l_rlu are used.
  # For "h00" scan, fixed_k_rlu and fixed_l_rlu are used.
  # For "00l" scan, fixed_h_rlu and fixed_k_rlu are used.
  fixed_h_rlu: 0.0
  fixed_k_rlu: 0.0
  fixed_l_rlu: 0.0

sqw_map_calc:
  enabled: true
  lattice_params: # For converting RLU to Cartesian for S(Q,w) map
                  # These are a, b, c in Angstroms
    la: 20.645
    lb: 8.383
    lc: 6.442
  scan_direction: "0k0"  # Scan axis for the map: "h00", "0k0", "00l"
  q_scan_min_rlu: -3.0   # Min Q for the scan axis of the map in r.l.u.
  q_scan_max_rlu: 3.0   # Max Q for the scan axis of the map in r.l.u.
  q_scan_step_rlu: 0.05 # Step for the scan axis of the map in r.l.u.
  # Fixed RLU components for the S(Q,w) map scan
  map_fixed_h_rlu: 0.0
  map_fixed_k_rlu: 0.0 # Only used if scan_direction is h00 or 00l
  map_fixed_l_rlu: 0.0
  energy_bins: # For binning S(Q,w) intensity
    min: 0.0
    max: 12.0
    step: 0.05
  lorentzian_width: 0.2 # Lorentzian broadening for intensity map

plotting:
  show_plot: true
  save_plot: true
  plot_filename: "sw_CVO_combined.png"
  figure_title_prefix: "Spin Waves in α-Cu₂V₂O₇" # Will be augmented with H field

  dispersion_plot:
    # xlim: [1, 3] # Optional, can be derived from q_path if not set. If set, overrides derived.
    ylim: [0, 12]
    # xlabel will be automatically generated based on q_path_type
    ylabel: "ħω (meV)"

  sqw_map_plot:
    # xlim will be derived from q_scan_min/max_rlu for the map
    # ylim will be derived from energy_bins min/max for the map
    # xlabel will be automatically generated based on scan_direction
    ylabel: "ħω (meV)"
    vmax_scale: 5.0 # Scales the max intensity for color plot
    colorbar_label: "Intensity (arb. units)"
    log_scale: false # true for LogNorm, false for linear
